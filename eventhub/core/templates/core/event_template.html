{% extends "core/base.html" %}
{% block content %}

<h2>{{ event.title }}</h2>
<p><strong>Date :</strong> {{ event.date|date:"d/m/Y H:i" }}</p>
<p><strong>Lieu :</strong> {{ event.location }}</p>
<p><strong>Capacité :</strong> {{ event.capacity }}</p>

{% if event.image %}
  <img src="{{ event.image.url }}" class="img-fluid mb-3">
{% endif %}

<!-- Inscription -->
{% if user.is_authenticated %}
  <a href="{% url 'event_register' event.pk %}" class="btn btn-success">S'inscrire</a>
{% else %}
  <p><a href="{% url 'login' %}">Connectez-vous</a> pour vous inscrire.</p>
{% endif %}

<hr>
<h3>Avis</h3>
{% for review in event.reviews.all %}
  {% if review.is_validated %}
    <div class="card my-2">
      <div class="card-body">
        <strong>{{ review.user.username }}</strong> ⭐ {{ review.rating }}/5 <br>
        <p>{{ review.text }}</p>
        {% if review.image %}
          <img src="{{ review.image.url }}" class="img-thumbnail" width="200">
        {% endif %}
      </div>
    </div>
  {% endif %}
{% empty %}
  <p>Aucun avis pour le moment.</p>
{% endfor %}

{% if user.is_authenticated %}
  <a href="{% url 'add_review' event.pk %}" class="btn btn-primary">➕ Ajouter un avis</a>
{% endif %}

{% endblock %}
